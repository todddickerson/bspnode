
> bspnode@0.1.0 dev
> node server.js

> Ready on http://localhost:3001
 ○ Compiling /debug ...
 ✓ Compiled /not-found in 1152ms (744 modules)
 ⚠ Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ⚠ Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 ⚠ Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /stream/[id] in 467ms (1108 modules)
 ✓ Compiled /dashboard in 87ms (954 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ○ Compiling /api/streams/[id] ...
 ✓ Compiled /api/streams/[id] in 582ms (1129 modules)
 ✓ Compiled (1133 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 455ms (1609 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled in 89ms (476 modules)
 ✓ Compiled in 256ms (1767 modules)
 ✓ Compiled /api/debug/test-message in 184ms (1206 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
❌ Test message API error: SyntaxError: Bad escaped character in JSON at position 65
    at JSON.parse (<anonymous>)
    at parseJSONFromBytes (node:internal/deps/undici/undici:5738:19)
    at successSteps (node:internal/deps/undici/undici:5719:27)
    at fullyReadBody (node:internal/deps/undici/undici:4609:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async consumeBody (node:internal/deps/undici/undici:5728:7)
    at async POST (webpack-internal:///(rsc)/./app/api/debug/test-message/route.ts:11:40)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:63809
    at async eU.execute (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53964)
    at async eU.handle (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:65062)
    at async doRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1317:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1539:28)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1447:28)
    at async DevServer.renderPageComponent (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1844:24)
    at async DevServer.renderToResponseImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1882:32)
    at async DevServer.pipeImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:895:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/next-server.js:269:17)
    at async DevServer.handleRequestImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:791:17)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:331:20
    at async Span.traceAsyncFn (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/trace/trace.js:151:20)
    at async DevServer.handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:328:24)
    at async invokeRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async NextCustomServer.requestHandlerImpl [as requestHandler] (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:377:13)
🧪 Test message API called: {
  stream_id: 'test-stream-123',
  content: 'Hello from API test',
  hasSupabaseAdmin: true
}
🧪 Inserting test message: {
  stream_id: 'test-stream-123',
  user_id: 'test-user',
  user_name: 'Test User',
  content: 'Hello from API test'
}
✅ Test message inserted successfully: [
  {
    id: 'd81d8e9a-8875-43cc-be15-582c80ca203f',
    stream_id: 'test-stream-123',
    user_id: 'test-user',
    user_name: 'Test User',
    content: 'Hello from API test',
    created_at: '2025-08-01T12:22:34.12989+00:00',
    updated_at: '2025-08-01T12:22:34.12989+00:00'
  }
]
 ✓ Compiled in 195ms (1079 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🧪 Test message API called: {
  stream_id: 'test-stream-debug-fixed',
  content: 'Real-time test message #1',
  hasSupabaseAdmin: true
}
🧪 Inserting test message: {
  stream_id: 'test-stream-debug-fixed',
  user_id: 'test-user',
  user_name: 'Test User',
  content: 'Real-time test message #1'
}
✅ Test message inserted successfully: [
  {
    id: 'ff48f865-8014-451e-9cf4-16ea9295384c',
    stream_id: 'test-stream-debug-fixed',
    user_id: 'test-user',
    user_name: 'Test User',
    content: 'Real-time test message #1',
    created_at: '2025-08-01T12:22:47.473296+00:00',
    updated_at: '2025-08-01T12:22:47.473296+00:00'
  }
]
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🧪 Test message API called: {
  stream_id: 'test-stream-debug-fixed',
  content: 'Real-time test message #2 - after page load',
  hasSupabaseAdmin: true
}
🧪 Inserting test message: {
  stream_id: 'test-stream-debug-fixed',
  user_id: 'test-user',
  user_name: 'Test User',
  content: 'Real-time test message #2 - after page load'
}
✅ Test message inserted successfully: [
  {
    id: '18cca6d5-8957-4090-9143-5e948347f8a6',
    stream_id: 'test-stream-debug-fixed',
    user_id: 'test-user',
    user_name: 'Test User',
    content: 'Real-time test message #2 - after page load',
    created_at: '2025-08-01T12:22:57.539202+00:00',
    updated_at: '2025-08-01T12:22:57.539202+00:00'
  }
]
 ✓ Compiled in 93ms (474 modules)
 ✓ Compiled in 157ms (1237 modules)
 ✓ Compiled /api/debug/get-messages in 60ms (607 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔍 Getting messages for stream: test-stream-debug-fixed hasSupabase: true
✅ Messages retrieved: 2 messages
 ✓ Compiled in 107ms (474 modules)
 ✓ Compiled in 196ms (1239 modules)
 ✓ Compiled /api/debug/test-realtime in 53ms (609 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🧪 Testing real-time subscription server-side
🔌 Server-side subscription status: SUBSCRIBED
🔌 Server-side subscription status: CLOSED
 ✓ Compiled in 440ms (977 modules)
 ✓ Compiled in 143ms (977 modules)
 ✓ Compiled in 92ms (474 modules)
 ✓ Compiled in 196ms (1163 modules)
 ✓ Compiled /api/debug/check-supabase in 43ms (519 modules)
 ✓ Compiled in 125ms (474 modules)
 ✓ Compiled in 90ms (475 modules)
 ✓ Compiled in 87ms (475 modules)
 ✓ Compiled /debug in 154ms (522 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/auth/[...nextauth] in 452ms (751 modules)
 ✓ Compiled in 136ms (475 modules)
 ✓ Compiled in 225ms (1398 modules)
 ✓ Compiled /not-found in 282ms (1217 modules)
 ✓ Compiled /api/debug/test-ws in 64ms (756 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled in 124ms (477 modules)
 ✓ Compiled in 238ms (1391 modules)
 ✓ Compiled /api/debug/test-minimal-realtime in 182ms (839 modules)
Presence sync
 ✓ Compiled in 85ms (477 modules)
 ✓ Compiled in 181ms (1474 modules)
 ✓ Compiled /api/debug/test-postgres-changes in 70ms (841 modules)
 ✓ Compiled in 262ms (1304 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/debug/test-message in 69ms (839 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🧪 Test message API called: {
  stream_id: 'test-stream-debug-fixed',
  content: 'Testing real-time after fix #1',
  hasSupabaseAdmin: true
}
🧪 Inserting test message: {
  stream_id: 'test-stream-debug-fixed',
  user_id: 'test-user',
  user_name: 'Test User',
  content: 'Testing real-time after fix #1'
}
✅ Test message inserted successfully: [
  {
    id: '0ede3162-f3a4-465f-9428-480688f93982',
    stream_id: 'test-stream-debug-fixed',
    user_id: 'test-user',
    user_name: 'Test User',
    content: 'Testing real-time after fix #1',
    created_at: '2025-08-01T12:52:14.22447+00:00',
    updated_at: '2025-08-01T12:52:14.22447+00:00'
  }
]
 ✓ Compiled /api/debug/get-messages in 50ms (610 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔍 Getting messages for stream: test-stream-debug-fixed hasSupabase: true
✅ Messages retrieved: 3 messages
 ✓ Compiled /api/auth/[...nextauth] in 190ms (751 modules)
 ✓ Compiled /api/auth/[...nextauth] in 455ms (1129 modules)
 ✓ Compiled (1131 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ○ Compiling /stream/[id]/studio ...
 ✓ Compiled /stream/[id]/studio in 593ms (1632 modules)
 ✓ Compiled /api/streams/[id]/hosts in 83ms (1154 modules)
 ✓ Compiled (1156 modules)
 ✓ Compiled /api/streams/[id]/start in 91ms (1161 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: QaqrZpXTsdnvIWA3nZEdDLWJxi02XHCqVlY6DLgEYA8g
 ✓ Compiled /api/streams/[id]/token in 86ms (1163 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 450ms (1646 modules)
 ✓ Compiled in 194ms (1037 modules)
 ✓ Compiled in 219ms (1037 modules)
 ✓ Compiled /api/streams in 86ms (1150 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/hosts in 313ms (1152 modules)
 ✓ Compiled (1154 modules)
 ✓ Compiled /api/streams/[id]/start in 96ms (1159 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: x54r6Xb68UZShPpsEasSWDL664fjP4Zog92PSdn1M18
 ✓ Compiled /api/streams/[id]/token in 89ms (1161 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/hosts in 245ms (1158 modules)
 ✓ Compiled (1160 modules)
 ✓ Compiled /api/streams in 84ms (1163 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 362ms (1657 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: MbIR00ZdfEjHNLZyoClTQxVlrgWe19BkzEmWmbiOjF01g
 ✓ Compiled / in 326ms (1694 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 238ms (1708 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: KyDON52fXu6pS9vbN3BIr5Z02cCgLPEi02gTW3icUKb9Q
 ✓ Compiled /api/streams/[id]/egress/start in 305ms (1165 modules)
RTMP egress started: {
  egressId: 'EG_eaxbE7R5y2wL',
  roomName: 'cmdsztba10009lpgyksperr0p',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 344ms (1241 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled in 180ms (514 modules)
 ✓ Compiled /not-found in 369ms (1048 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/auth/[...nextauth] in 87ms (775 modules)
 ✓ Compiled /api/streams/[id]/debug-tracks in 91ms (934 modules)
Error getting track info: TypeError: Do not know how to serialize a BigInt
    at JSON.stringify (<anonymous>)
    at serializeJavascriptValueToJSONString (node:internal/deps/undici/undici:4458:27)
    at Response.json (node:internal/deps/undici/undici:9092:11)
    at NextResponse.json (webpack-internal:///(rsc)/./node_modules/next/dist/server/web/spec-extension/response.js:66:35)
    at GET (webpack-internal:///(rsc)/./app/api/streams/[id]/debug-tracks/route.ts:50:70)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:63809
    at async eU.execute (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53964)
    at async eU.handle (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:65062)
    at async doRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1317:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1527:40)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1447:28)
    at async DevServer.renderPageComponent (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1844:24)
    at async DevServer.renderToResponseImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1882:32)
    at async DevServer.pipeImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:895:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/next-server.js:269:17)
    at async DevServer.handleRequestImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:791:17)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:331:20
    at async Span.traceAsyncFn (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/trace/trace.js:151:20)
    at async DevServer.handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:328:24)
    at async invokeRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async NextCustomServer.requestHandlerImpl [as requestHandler] (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:377:13)
 ✓ Compiled in 192ms (1450 modules)
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 576ms (1158 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 370ms (1057 modules)
 ✓ Compiled in 100ms (514 modules)
 ✓ Compiled in 93ms (514 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/hosts in 163ms (772 modules)
 ✓ Compiled (776 modules)
 ✓ Compiled /api/streams in 96ms (1156 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/end in 203ms (1158 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/start in 126ms (1163 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: SptW6RfSxqTUuRRDR015zvydjt2XziYABGyzLg100cZto
 ✓ Compiled /api/streams/[id]/token in 125ms (1165 modules)
 ✓ Compiled /api/streams/[id]/egress/start in 219ms (1167 modules)
RTMP egress started: {
  egressId: 'EG_CApPGZRfktcP',
  roomName: 'cmdt00d4h000dlpgyz7ssgl8e',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 276ms (1243 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled in 174ms (514 modules)
 ✓ Compiled in 102ms (514 modules)
 ✓ Compiled in 91ms (514 modules)
 ✓ Compiled in 97ms (514 modules)
 ✓ Compiled in 93ms (514 modules)
 ✓ Compiled in 93ms (514 modules)
 ✓ Compiled /api/streams/[id]/debug-tracks in 219ms (702 modules)
 ✓ Compiled in 0ms (702 modules)
 ✓ Compiled in 0ms (702 modules)
 ✓ Compiled in 0ms (702 modules)
Error getting track info: Not Found: requested room does not exist
    at TwirpRpc.request (webpack-internal:///(rsc)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js:65:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async RoomServiceClient.listParticipants (webpack-internal:///(rsc)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js:83:18)
    at async GET (webpack-internal:///(rsc)/./app/api/streams/[id]/debug-tracks/route.ts:59:30)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:63809
    at async eU.execute (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53964)
    at async eU.handle (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:65062)
    at async doRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1317:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1527:40)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1447:28)
    at async DevServer.renderPageComponent (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1844:24)
    at async DevServer.renderToResponseImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1882:32)
    at async DevServer.pipeImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:895:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/next-server.js:269:17)
    at async DevServer.handleRequestImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:791:17)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:331:20
    at async Span.traceAsyncFn (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/trace/trace.js:151:20)
    at async DevServer.handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:328:24)
    at async invokeRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async NextCustomServer.requestHandlerImpl [as requestHandler] (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:377:13) {
  status: 404,
  code: 'not_found',
  metadata: undefined
}
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 833ms (1153 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/auth/[...nextauth] in 228ms (772 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 236ms (856 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/hosts in 210ms (858 modules)
 ✓ Compiled (860 modules)
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 539ms (1232 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/end in 233ms (1234 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/start in 206ms (1239 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: 5DeCTR9v9pItDjRysbdAacpO1Jdg02GsCmq0100GnCnSjM
 ✓ Compiled /api/streams/[id]/token in 109ms (1241 modules)
 ✓ Compiled /api/streams/[id]/egress/start in 273ms (1167 modules)
RTMP egress started: {
  egressId: 'EG_GyxLUyg5wNtJ',
  roomName: 'cmdt0m1l8000hlpgyln32ljf5',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
RTMP egress started: {
  egressId: 'EG_zr4LjPcDMwZV',
  roomName: 'cmdt0m1l8000hlpgyln32ljf5',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 191ms (627 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/end in 75ms (856 modules)
 ✓ Compiled / in 261ms (574 modules)
 ✓ Compiled /api/auth/[...nextauth] in 74ms (803 modules)
 ✓ Compiled /login in 260ms (1314 modules)
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 674ms (1190 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/hosts in 121ms (1192 modules)
 ✓ Compiled (1194 modules)
 ✓ Compiled /api/streams/[id]/start in 269ms (1199 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: nYKLCSO58mtXryPqKW5KFgjS7dVih8Ne5FH02CHnXpwY
 ✓ Compiled /api/streams/[id]/token in 114ms (1201 modules)
 ✓ Compiled /api/streams/[id]/egress/start in 274ms (1203 modules)
RTMP egress started: {
  egressId: 'EG_pVBQvJGt9TNm',
  roomName: 'cmdt1fco3000llpgyox3tm0zr',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
 ✓ Compiled /api/streams/[id]/debug-tracks in 240ms (1205 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 473ms (882 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
   Reload env: .env.local
 ✓ Compiled in 383ms (1558 modules)
 ✓ Compiled /not-found in 363ms (1391 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/debug-tracks in 92ms (1044 modules)
 ✓ Compiled /api/streams/[id]/egress/start in 438ms (1261 modules)
 ✓ Compiled in 0ms (1261 modules)
 ✓ Compiled in 0ms (1261 modules)
 ✓ Compiled in 0ms (1261 modules)
 ✓ Compiled in 195ms (518 modules)
 ✓ Compiled in 103ms (518 modules)
 ✓ Compiled in 93ms (518 modules)
 ✓ Compiled in 484ms (1087 modules)
 ✓ Compiled in 392ms (1093 modules)
 ✓ Compiled /api/streams/[id]/invites in 0ms (572 modules)
 ✓ Compiled in 0ms (801 modules)
 ✓ Compiled /api/streams/[id]/hosts in 149ms (803 modules)
 ✓ Compiled /api/auth/[...nextauth] in 154ms (805 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ⨯ ./components/ui/collapsible.tsx:4:0
Module not found: Can't resolve '@radix-ui/react-collapsible'
[0m [90m 2 |[39m[0m
[0m [90m 3 |[39m [36mimport[39m [33m*[39m [36mas[39m [33mReact[39m [36mfrom[39m [32m"react"[39m[0m
[0m[31m[1m>[22m[39m[90m 4 |[39m [36mimport[39m [33m*[39m [36mas[39m [33mCollapsiblePrimitive[39m [36mfrom[39m [32m"@radix-ui/react-collapsible"[39m[0m
[0m [90m 5 |[39m[0m
[0m [90m 6 |[39m [36mconst[39m [33mCollapsible[39m [33m=[39m [33mCollapsiblePrimitive[39m[33m.[39m[33mRoot[39m[0m
[0m [90m 7 |[39m[0m

https://nextjs.org/docs/messages/module-not-found

Import trace for requested module:
./components/streaming-status.tsx
./app/stream/[id]/studio/page.tsx
 ✓ Compiled in 343ms (1338 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 775ms (1198 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/end in 124ms (1200 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/start in 350ms (1205 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: Qv6th00v3pj7mC4uGJCWFMvGxhOx2mCA5iUjszAGlhj00
 ✓ Compiled /api/streams/[id]/token in 129ms (1207 modules)
 ✓ Compiled in 404ms (1727 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 188ms (1727 modules)
 ✓ Compiled in 419ms (1741 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: 6KE3ayojeMG2deP6UtZ5p25ms7q6Q9wYYCp02802mlics
 ✓ Compiled in 323ms (1739 modules)
 ✓ Compiled in 411ms (1741 modules)
 ✓ Compiled in 1ms (1206 modules)
 ✓ Compiled in 0ms (1206 modules)
 ✓ Compiled in 0ms (1206 modules)
 ✓ Compiled in 0ms (1206 modules)
 ✓ Compiled in 276ms (1741 modules)
 ✓ Compiled in 267ms (1736 modules)
 ✓ Compiled in 379ms (1736 modules)
 ✓ Compiled in 303ms (1352 modules)
 ✓ Compiled in 391ms (1121 modules)
 ✓ Compiled in 530ms (1121 modules)
 ✓ Compiled in 225ms (1121 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/auth/[...nextauth] in 232ms (815 modules)
 ✓ Compiled (817 modules)
 ✓ Compiled /api/streams/[id]/hosts in 226ms (819 modules)
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 575ms (1199 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/start in 129ms (1204 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: VM3005Ql9IdYhBM277FM900561801fc41Q314OmbY69F4o
 ✓ Compiled /api/streams/[id]/token in 114ms (1206 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: DLuK2Cx17EXI7qWpGqV2jsA81CyFsvdVrDz39ftUWIg
 ✓ Compiled in 308ms (1727 modules)
 ✓ Compiled in 284ms (1727 modules)
 ✓ Compiled in 161ms (1727 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: mNx00j5qFbk7tWWjFZ01S2mIRUoODt4wXZCVDOPxwIzIA
 ✓ Compiled /api/streams/[id]/egress/start in 288ms (1208 modules)
RTMP egress started: {
  egressId: 'EG_8QZk2MTbVvEc',
  roomName: 'cmdt24v16000plpgydmsbypjp',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
 ✓ Compiled /api/streams/[id]/debug-tracks in 177ms (1210 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 393ms (1286 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /not-found in 417ms (1812 modules)
 ✓ Compiled in 734ms (1355 modules)
 ✓ Compiled /api/streams/[id]/egress/status in 242ms (834 modules)
Error getting egress status: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at new TwirpRpc (webpack-internal:///(rsc)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js:20:14)
    at new EgressClient (webpack-internal:///(rsc)/./node_modules/livekit-server-sdk/dist/EgressClient.js:20:16)
    at GET (webpack-internal:///(rsc)/./app/api/streams/[id]/egress/status/route.ts:12:30)
    at /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:63815
    at /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/trace/tracer.js:133:36
    at NoopContextManager.with (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:7062)
    at ContextAPI.with (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:518)
    at NoopTracer.startActiveSpan (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:18093)
    at ProxyTracer.startActiveSpan (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:18854)
    at /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/trace/tracer.js:122:103
    at NoopContextManager.with (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:7062)
    at ContextAPI.with (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/@opentelemetry/api/index.js:1:518)
    at NextTracerImpl.trace (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/trace/tracer.js:122:28)
    at /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:56866
    at AsyncLocalStorage.run (node:async_hooks:346:14)
    at Object.wrap (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:37102)
    at /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54639
    at AsyncLocalStorage.run (node:async_hooks:346:14)
    at Object.wrap (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:36351)
    at /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:54601
    at AsyncLocalStorage.run (node:async_hooks:346:14)
    at eU.execute (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53994)
    at eU.handle (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:65073)
    at doRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1317:60)
    at cacheEntry.responseCache.get.routeKind (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1527:46)
    at ResponseCache.get (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/response-cache/index.js:49:26)
    at DevServer.renderToResponseWithComponentsImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1447:53)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async DevServer.renderPageComponent (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1844:24)
    at async DevServer.renderToResponseImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1882:32)
    at async DevServer.pipeImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:895:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/next-server.js:269:17)
    at async DevServer.handleRequestImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:791:17)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:331:20
    at async Span.traceAsyncFn (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/trace/trace.js:151:20)
    at async DevServer.handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:328:24)
    at async invokeRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async NextCustomServer.requestHandlerImpl [as requestHandler] (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:377:13)
 ✓ Compiled in 237ms (1287 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 365ms (1287 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
Error getting egress status: TypeError: Do not know how to serialize a BigInt
    at JSON.stringify (<anonymous>)
    at serializeJavascriptValueToJSONString (node:internal/deps/undici/undici:4458:27)
    at Response.json (node:internal/deps/undici/undici:9092:11)
    at NextResponse.json (webpack-internal:///(rsc)/./node_modules/next/dist/server/web/spec-extension/response.js:66:35)
    at GET (webpack-internal:///(rsc)/./app/api/streams/[id]/egress/status/route.ts:36:70)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:63809
    at async eU.execute (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:53964)
    at async eU.handle (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:65062)
    at async doRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1317:42)
    at async cacheEntry.responseCache.get.routeKind (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1527:40)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1447:28)
    at async DevServer.renderPageComponent (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1844:24)
    at async DevServer.renderToResponseImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:1882:32)
    at async DevServer.pipeImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:895:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/next-server.js:269:17)
    at async DevServer.handleRequestImpl (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/base-server.js:791:17)
    at async /Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:331:20
    at async Span.traceAsyncFn (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/trace/trace.js:151:20)
    at async DevServer.handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/dev/next-dev-server.js:328:24)
    at async invokeRender (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:174:21)
    at async handleRequest (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:353:24)
    at async NextCustomServer.requestHandlerImpl [as requestHandler] (/Users/todddickerson/src/GitHub/bspnode/node_modules/next/dist/server/lib/router-server.js:377:13)
 ✓ Compiled in 239ms (1287 modules)
 ✓ Compiled in 1ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ✓ Compiled in 0ms (750 modules)
 ○ Compiling /api/streams/[id]/egress/start ...
 ✓ Compiled /api/streams/[id]/egress/start in 1028ms (1202 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/auth/[...nextauth] in 465ms (974 modules)
 ✓ Compiled (976 modules)
 ✓ Compiled /api/streams/[id]/hosts in 207ms (978 modules)
 ✓ Compiled /api/streams in 468ms (1202 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/end in 125ms (1204 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/start in 132ms (1208 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: y6Sq9UWRwV00zcfu1VaynJukSchKjjCuCCRkEvrwxeEE
 ✓ Compiled /api/streams/[id]/token in 357ms (1210 modules)
 ✓ Compiled /api/streams/[id]/egress/start in 313ms (1212 modules)
RTMP egress started: {
  egressId: 'EG_NeTBbDgSn6FR',
  roomName: 'cmdt2n993000tlpgytusiy7lr',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/egress/status in 291ms (747 modules)
 ✓ Compiled in 253ms (535 modules)
 ✓ Compiled in 509ms (1280 modules)
 ✓ Compiled in 0ms (745 modules)
 ✓ Compiled in 0ms (745 modules)
 ✓ Compiled in 1ms (745 modules)
 ✓ Compiled in 0ms (745 modules)
 ✓ Compiled /api/streams/[id]/egress/status in 281ms (747 modules)
 ✓ Compiled in 0ms (747 modules)
 ✓ Compiled in 0ms (747 modules)
 ✓ Compiled in 0ms (747 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ○ Compiling /api/auth/[...nextauth] ...
 ✓ Compiled /api/auth/[...nextauth] in 725ms (974 modules)
 ○ Compiling /api/streams/[id]/heart ...
 ✓ Compiled /api/streams/[id]/heart in 800ms (829 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled / in 410ms (757 modules)
 ✓ Compiled /api/auth/[...nextauth] in 109ms (986 modules)
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 621ms (1210 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/end in 280ms (1212 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled in 343ms (1747 modules)
 ✓ Compiled in 256ms (1744 modules)
 ✓ Compiled in 350ms (1730 modules)
 ✓ Compiled in 366ms (1089 modules)
 ✓ Compiled in 283ms (1089 modules)
 ✓ Compiled in 243ms (1089 modules)
 ✓ Compiled in 343ms (1091 modules)
 ✓ Compiled in 248ms (1091 modules)
 ○ Compiling /api/streams ...
 ✓ Compiled /api/streams in 1322ms (1192 modules)
Initializing Mux with credentials: { hasTokenId: true, hasTokenSecret: true, tokenIdLength: 36 }
 ✓ Compiled /api/streams/[id]/invites in 229ms (1194 modules)
 ✓ Compiled (1196 modules)
 ✓ Compiled /api/streams/[id]/hosts in 118ms (1198 modules)
 ✓ Compiled /api/streams/[id]/start in 136ms (1203 modules)
Creating LiveKit room...
Creating Mux live stream...
Creating enhanced Mux live stream...
Live stream created: kPu1G00KHz8RpI8ZNGvx6OODLYUQhZUDN01NfpUvpNE6k
 ✓ Compiled /api/streams/[id]/token in 120ms (1205 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/auth/[...nextauth] in 267ms (1207 modules)
 ✓ Compiled /api/streams/[id]/egress/start in 135ms (1209 modules)
RTMP egress started: {
  egressId: 'EG_zcRLBDPP57TX',
  roomName: 'cmdt3n4eu000xlpgyznvx7exz',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
 ✓ Compiled /api/streams/[id]/debug-tracks in 134ms (1211 modules)
RTMP egress started: {
  egressId: 'EG_sLdrUWCZ6YgV',
  roomName: 'cmdt3n4eu000xlpgyznvx7exz',
  layout: 'speaker',
  urls: [ 'rtmps://global-live.mux.com:443/app/***' ]
}
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled /api/streams/[id]/heart in 425ms (1287 modules)
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
🔧 Supabase client initialization: { hasUrl: true, hasAnonKey: true, urlLength: 40, keyLength: 208 }
✅ Supabase client created successfully
 ✓ Compiled in 276ms (536 modules)
 ✓ Compiled in 782ms (1511 modules)
 ✓ Compiled in 0ms (975 modules)
 ✓ Compiled in 0ms (975 modules)
 ✓ Compiled in 1ms (975 modules)
 ✓ Compiled in 1ms (975 modules)
 ✓ Compiled in 338ms (1282 modules)
 ✓ Compiled in 1ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 372ms (1282 modules)
 ✓ Compiled in 1ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 277ms (1282 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 0ms (746 modules)
 ✓ Compiled in 593ms (1280 modules)
 ✓ Compiled in 305ms (1280 modules)
 ✓ Compiled in 427ms (1280 modules)
 ✓ Compiled in 313ms (1280 modules)
